<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <title>Retail</title>
</head>

<body>
    <div
        class="w-full min-h-screen font-serif bg-indigo-200 p-10">
        <h1 class="text-3xl text-indigo-800 font-medium mb-4">New Enrollment Information</h1>
        <hr class="text-indigo-800">
        <div x-data="invoice" x-init="console.log('Alpine is working', student_name)" class="w-full mt-4">
            <h1 class="text-2xl text-indigo-800 font-semibold">User Information</h1>

            <!-- Customer Register Information -->
            <div class="flex mt-4">
                <div class="w-2/4 bg-white/90 mr-4 px-12 py-15 rounded-sm shadow-md">
                    <h1 class="text-xl text-indigo-800 font-semibold">Customer information</h1>
                    <form action="" class="mt-4">
                        <div class="">
                            <label for="" class="text-indigo-800">Full Name</label>
                            <input type="text" name="fullname" @input="changeFormData" x-model="student_name"
                                class="w-full mt-3 border-1 border-indigo-400 text-indigo-700 rounded-sm focus:outline-none focus:ring-4 focus:ring-indigo-300 px-4 py-2" />
                        </div>
                        <div class="mt-3">
                            <label for="" class="text-indigo-800">Email</label>
                            <input type="email" name="email" @input="changeFormData" x-model="student_email"
                                class="w-full mt-3 border-1 border-indigo-400 text-indigo-700 rounded-sm focus:outline-none focus:ring-4 focus:ring-indigo-300 px-4 py-2" />
                        </div>
                        <div class="mt-3">
                            <label for="" class="text-indigo-800">Phone Number</label>
                            <input type="number" name="phone" @input="changeFormData" x-model="student_phone"
                                class="w-full mt-3 border-1 border-indigo-400 text-indigo-700 rounded-sm focus:outline-none focus:ring-4 focus:ring-indigo-300 px-4 py-2" />
                        </div>
                    </form>
                </div>
                <div class="w-2/4 bg-white/90 px-12 py-15 rounded-sm shadow-md">
                    <div class="flex justify-between">
                        <h1 class="text-xl text-indigo-800 font-semibold">Relative information</h1>
                        <div class="flex items-center text-slate-700">
                            <input type="checkbox" @change="changeFormData" x-model="sameInfoWithStudent" class="w-4 h-4 accent-indigo-800 checked:ring-2 checked:ring-indigo-300" name="" id="">
                            <span class="ml-2">Same as student</span>
                        </div>
                    </div>
                    <form action="" class="mt-4">
                        <div class="">
                            <label for="" class="text-indigo-800">Name</label>
                            <input type="text" name="relative_name" x-model="relative_name" :disabled="sameInfoWithStudent"
                                class="w-full mt-3 border-1 border-indigo-400 text-indigo-700 rounded-sm focus:outline-none focus:ring-4 focus:ring-indigo-300 px-4 py-2" />
                        </div>
                        <div class="mt-3">
                            <label for="" class="text-indigo-800">Email</label>
                            <input type="email" name="relative_email" x-model="relative_email" :disabled="sameInfoWithStudent"
                                class="w-full mt-3 border-1 border-indigo-400 text-indigo-700 rounded-sm focus:outline-none focus:ring-4 focus:ring-indigo-300 px-4 py-2" />
                        </div>
                        <div class="mt-3">
                            <label for="" class="text-indigo-800">Phone</label>
                            <input type="number" name="relative_phone" x-model="relative_phone" :disabled="sameInfoWithStudent"
                                class="w-full mt-3 border-1 border-indigo-400 text-indigo-700 rounded-sm focus:outline-none focus:ring-4 focus:ring-indigo-300 px-4 py-2" />
                        </div>
                    </form>
                </div>
            </div>

            <!-- Referral Information -->
            <div class="w-full px-12 py-10 mt-4 bg-white/90 rounded-sm shadow-md">
                <h1 class="text-xl font-semibold text-indigo-800 mb-4">Referral information</h1>
                <label for="" class="text-indigo-800">Select Referral</label>
                <select name="" x-model="selectedReferral" @change="onSelect" class="w-full border-1 border-indigo-400 focus:outline-none focus:ring-2 focus:ring-indigo-300 text-indigo-700 rounded-sm px-4 py-2 mt-4" id="">
                    <template x-for="referral in referrals" :key="referral">
                        <option :value="referral" x-text="referral"></option>
                    </template>
                </select>

                <form action="" class="mt-4" x-show="showReferralForm">
                    <div class="">
                        <label for="" class="text-indigo-800">Name</label>
                        <input type="text" name="relative_name" x-model="referral_name"
                            class="w-full mt-3 border-1 border-indigo-400 text-indigo-700 rounded-sm focus:outline-none focus:ring-4 focus:ring-indigo-300 px-4 py-2" />
                    </div>
                    <div class="mt-3">
                        <label for="" class="text-indigo-800">Email</label>
                        <input type="email" name="relative_email" x-model="referral_email"
                            class="w-full mt-3 border-1 border-indigo-400 text-indigo-700 rounded-sm focus:outline-none focus:ring-4 focus:ring-indigo-300 px-4 py-2" />
                    </div>
                    <div class="mt-3">
                        <label for="" class="text-indigo-800">Phone</label>
                        <input type="number" name="relative_phone" x-model="referral_phone"
                            class="w-full mt-3 border-1 border-indigo-400 text-indigo-700 rounded-sm focus:outline-none focus:ring-4 focus:ring-indigo-300 px-4 py-2" />
                    </div>
                </form>
            </div>

            <!-- Courses Items Table -->
            <div class="w-full px-12 py-10 mt-4 bg-white/90 rounded-sm shadow-md">
                <h1 class="text-xl text-indigo-800">Select Item</h1>
                <table class="table-auto w-full mt-4">
                    <thead>
                        <tr class="text-indigo-800 uppercase">
                            <th class="border-b-1 border-slate-300 px-4 py-2 text-left">Course Name</th>                            
                            <th class="border-b-1 border-slate-300 px-4 py-2 text-left">Batch</th>                            
                            <th class="border-b-1 border-slate-300 px-4 py-2 text-left">Type</th>                            
                            <th class="border-b-1 border-slate-300 px-4 py-2 text-left">Remark</th>                            
                            <th class="border-b-1 border-slate-300 px-4 py-2 text-left">Fee</th>                            
                            <th class="border-b-1 border-slate-300 px-4 py-2 text-left">Action</th>                            
                        </tr>
                    </thead>
                    <tbody>
                        <template x-for="courseItem in courseItems" :key="courseItem.courseName">
                            <tr class="text-slate-700">
                                <td class="border-b-1 border-slate-300 px-4 py-2 text-left" x-text="courseItem.courseName"></td>
                                <td class="border-b-1 border-slate-300 px-4 py-2 text-left" x-text="courseItem.batch"></td>
                                <td class="border-b-1 border-slate-300 px-4 py-2 text-left" x-text="courseItem.type"></td>
                                <td class="border-b-1 border-slate-300 px-4 py-2 text-left" x-text="courseItem.remark"></td>
                                <td class="border-b-1 border-slate-300 px-4 py-2 text-left"><span x-text="courseItem.fee"></span> MMK</td>
                                <td class="border-b-1 border-slate-300 px-4 py-2 text-left">
                                    <input type="checkbox" id="" @change="addCourse(courseItem)" class="w-4 h-4 accent-indigo-800" x-model="courseItem.action">
                                </td>
                            </tr>
                        </template>
                    </tbody>
                </table>
            </div>

            <!-- Invoice Item table -->
            <div class="w-full px-12 py-10 mt-4 bg-white/90 rounded-sm shadow-md">
                <h1 class="text-xl text-indigo-800">Invoice Items</h1>
                <table class="table-auto w-full mt-4">
                    <thead>
                        <tr class="text-slate-500 uppercase bg-slate-200">
                            <th class="border-b-1 border-slate-300 px-4 py-2 text-left">Course Name</th>                            
                            <th class="border-b-1 border-slate-300 px-4 py-2 text-left">Batch</th>                            
                            <th class="border-b-1 border-slate-300 px-4 py-2 text-left">Type</th>                            
                            <th class="border-b-1 border-slate-300 px-4 py-2 text-left">Remark</th>                            
                            <th class="border-b-1 border-slate-300 px-4 py-2 text-left">Unit Price</th>                            
                            <th class="border-b-1 border-slate-300 px-4 py-2 text-left">Discount</th>
                            <th class="border-b-1 border-slate-300 px-4 py-2 text-left">Price</th>                            
                        </tr>
                    </thead>
                    <tbody>
                        <template x-for="selectedCourse in selectedCourses" :key="selectedCourse.courseName">
                            <tr class="text-slate-700">
                                <td class="border-b-1 border-slate-300 px-4 py-2 text-left" x-text="selectedCourse.courseName"></td>
                                <td class="border-b-1 border-slate-300 px-4 py-2 text-left" x-text="selectedCourse.batch"></td>
                                <td class="border-b-1 border-slate-300 px-4 py-2 text-left" x-text="selectedCourse.type"></td>
                                <td class="border-b-1 border-slate-300 px-4 py-2 text-left" x-text="selectedCourse.remark"></td>
                                <td class="border-b-1 border-slate-300 px-4 py-2 text-left"><span x-text="selectedCourse.fee"></span> MMK</td>
                                <td class="border-b-1 border-slate-300 px-4 py-2 text-left" x-text="selectedCourse.discount">
                
                                </td>
                                <td class="border-b-1 border-slate-300 px-4 py-2 text-left" x-text="selectedCourse.total">
    
                                </td>
                            </tr>
                        </template>                      
                       
                    </tbody>
                </table>
            </div>

            <!-- Payment Selection -->
             <div class="w-full px-12 py-10 mt-4 bg-white/90 rounded-sm shadow-md">
                <h1 class="text-xl text-indigo-800">Select Payment Methods</h1>
                <div class="flex mt-4 gap-4">
                    <template x-for="paymentMethd in paymentMethds" :key="paymentMethd.type">
                        <div @click="switchPayment(paymentMethd)" :class="`w-2/6 border-1 border-${paymentMethd.color}-300 rounded-sm shadow-md flex items-center p-4 border-b-4 hover:ring-3 hover:ring-${paymentMethd.color}-200`">
                            <img :src="'./img/' + paymentMethd.image" width="50" alt="">
                            <div class="ml-3">
                                <p :class="`text-${paymentMethd.color}-800 font-medium`" x-text="paymentMethd.type"></p>
                                <p class="text-slate-700" x-text="paymentMethd.info"></p>
                            </div>
                        </div>
                    </template>
                    
                </div>
                <div class="w-full flex mt-4 justify-center">
                    <div class="" x-show="selectedPayment.type == 'Cash' ">
                        <img src="./img/cash.webp" width="400" alt="">
                    </div>
                    <div class="" x-show="selectedPayment.type == 'KBZ Pay' ">
                        <img src="./img/kbz-qr.webp" width="250" alt="">
                    </div>
                    <div class="w-2/4 border-1 border-slate-300 rounded-sm shadow-md px-8 py-6" x-show="selectedPayment.type == 'KBZ Bank' ">
                        <h1 class="font-semibold text-indigo-800">KBZ Bank Account Details</h1>
                        <div class="flex justify-between mt-4 border-b-1 border-slate-300 py-2">
                            <p class="text-slate-400">Account Name:</p>
                            <p class="text-indigo-800 font-medium">NEX Bridge Global group of companies</p>
                        </div>
                        <div class="flex justify-between mt-2 border-b-1 border-slate-300 py-2">
                            <p class="text-slate-400">Account Number:</p>
                            <p class="text-indigo-800 font-medium">09234-56789-01234</p>
                        </div>
                        <div class="flex justify-between mt-2 border-b-1 border-slate-300 py-2">
                            <p class="text-slate-400">Branch:</p>
                            <p class="text-indigo-800 font-medium">Yangon Main Branch</p>
                        </div>
                        <p class="text-slate-400 mt-2">Please include your name and selected course in the transfer reference</p>
                    </div>
                </div>
                
             </div>

            <!-- Button section -->
             <div class="mt-4 w-full text-end">
                <button class="bg-indigo-800 px-4 py-2 text-white rounded-sm hover:bg-indigo-900">Print Invoice</button>
                <button class="border-1 border-indigo-800 px-4 py-2 text-indigo-800 rounded-sm hover:bg-indigo-800 hover:text-white ml-3">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('invoice', () => ({
                student_name : '',
                student_email : '',
                student_phone : '',
                relative_name : '',
                relative_email : '',
                relative_phone : '',
                referral_name : '',
                referral_email : '',
                referral_phone : '',
                sameInfoWithStudent : false,
                selectedReferral : 'Manager',
                referrals : ['CEO', 'Manager', 'Supervisor', 'Teamlead', 'Senior', 'Add New Referral'],
                showReferralForm : false,
                paymentMethds : [
                    {
                        color : "indigo",
                        type : "Cash",
                        info : "Pay with cash in person",
                        image : "dollars.png"
                    },
                    {
                        color : "sky",
                        type : "KBZ Pay",
                        info : "Pay via KBZ Pay mobile",
                        image : "kpay.webp"
                    },
                    {
                        color : "purple",
                        type : "KBZ Bank",
                        info : "Pay via KBZ Banking",
                        image : "kbz_bank.png"
                    },
                ],
                selectedPayment : {},
                selectedCourses : [],
                courseItems : [
                    {
                        courseName : 'General A1',
                        batch : 'April 2025',
                        type : 'online',
                        remark : '-',
                        fee : 300000,
                        action : false
                    },
                    {
                        courseName : 'General A2',
                        batch : 'May 2025',
                        type : 'online',
                        remark : '-',
                        fee : 300000,
                        action : false
                    },
                    {
                        courseName : 'General B1',
                        batch : 'March 2025',
                        type : 'offline',
                        remark : '-',
                        fee : 400000,
                        action : false
                    },
                    {
                        courseName : 'General B2',
                        batch : 'April 2025',
                        type : 'offline',
                        remark : '-',
                        fee : 500000,
                        action : false
                    },
                    {
                        courseName : 'General C1',
                        batch : 'May 2025',
                        type : 'online',
                        remark : '-',
                        fee : 400000,
                        action : false
                    }
                ],

                changeFormData(){
                    if(this.sameInfoWithStudent){
                        this.relative_name = this.student_name
                        this.relative_email = this.student_email
                        this.relative_phone = this.student_phone
                    }
                },

                onSelect(){
                    if(this.selectedReferral == "Add New Referral"){
                        this.showReferralForm = true;
                    }else{
                        this.showReferralForm = false;
                    }
                },

                switchPayment(payment){
                    this.selectedPayment = payment
                    //console.log(this.selectedPayment.type)
                },

                addCourse(course){
                    if(course.action){
                        this.selectedCourses.push({...course,discount : 0 , total : 0})
                        console.log(this.selectedCourses)
                    }else{
                        this.selectedCourses = this.selectedCourses.filter((sel) => course.courseName !== sel.courseName)
                    }
                }
            }))
        })
    </script>
</body>

</html>